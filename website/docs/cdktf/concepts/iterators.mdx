---
page_title: Iterators
description: >-
  Iterators allow you to iterate over a collection of values that are only available at runtime.
---

# Iterators

When you need to create multiple resources of the same type, you can usually use loops in your target language to do this.
However there are certain situations where the number of resources to create is not known at synth time.
In this case, you can use iterators.

## Using iterators

To create an iterator, import the `TerraformIterator` class and call the `.fromList()` or `.fromMap()` static method.
Pass the iterator to the resource, data source, or module that you want to use it in using using `forEach` property.
You can now use the iterator in attributes of that resource, data source, or module (see `name` below).

```ts
import { s3 } from "@cdktf/provider-aws";
import { TerraformIterator, TerraformVariable } from "cdktf";

const list = new TerraformVariable(this, "list", {
  type: "list(string)",
});

const iterator = TerraformIterator.fromList(list.listValue);

const s3Bucket = new s3.Bucket(this, "bucket", {
  forEach: iterator,
  name: iterator.value,
});
```

## Using iterators on complex types

The iterator also exposes methods to access nested attributes of e.g. records you might be iterating over.

```ts
const iterator = TerraformIterator.fromList([
  {
    name: "foo",
    tags: { app: "bar" },
  },
  {
    name: "baz",
    tags: { app: "qux" },
  },
]);

const s3Bucket = new s3.Bucket(this, "bucket", {
  forEach: iterator,
  name: iterator.getString("name"),
  tags: iterator.getStringMap("tags"),
});
```
